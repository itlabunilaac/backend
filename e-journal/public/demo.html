<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Journal API Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }

        .nav-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .content {
            padding: 30px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .endpoint-section {
            margin-bottom: 40px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .endpoint-header {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
        }

        .endpoint-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #495057;
            margin-bottom: 5px;
        }

        .endpoint-method {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 10px;
        }

        .method-get { background: #28a745; color: white; }
        .method-post { background: #007bff; color: white; }
        .method-put { background: #ffc107; color: black; }
        .method-delete { background: #dc3545; color: white; }

        .endpoint-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #495057;
        }

        .form-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-textarea {
            min-height: 80px;
            resize: vertical;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .response-container {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }

        /* Documentation Styles */
        .api-url-container {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
            margin: 10px 0;
        }

        .endpoint-list {
            margin: 15px 0;
        }

        .endpoint-item {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid transparent;
        }

        .endpoint-item:hover {
            background: #e9ecef;
        }

        .method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.85rem;
            min-width: 60px;
            text-align: center;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .method.get {
            background: #28a745;
            color: white;
        }

        .method.post {
            background: #007bff;
            color: white;
        }

        .method.put {
            background: #ffc107;
            color: #212529;
        }

        .method.delete {
            background: #dc3545;
            color: white;
        }

        .endpoint-item code {
            flex: 1;
            background: #ffffff;
            padding: 6px 10px;
            border-radius: 4px;
            border: 1px solid #dee2e6;
            margin-right: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .endpoint-item p {
            color: #6c757d;
            margin: 0;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .param-table {
            margin: 15px 0;
        }

        .param-row {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .param-row code {
            min-width: 120px;
            margin-right: 15px;
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .admin-info {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin: 10px 0;
        }

        .admin-info code {
            background: #ffffff;
            padding: 2px 6px;
            border-radius: 3px;
            border: 1px solid #dee2e6;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .feature-item {
            background: #d4edda;
            padding: 10px;
            border-radius: 6px;
            border-left: 4px solid #28a745;
            font-size: 0.9rem;
        }

        .example-section {
            margin: 20px 0;
        }

        .example-section h4 {
            color: #495057;
            margin: 15px 0 8px 0;
            font-size: 1.1rem;
        }

        .json-viewer {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
        }

        .response-header {
            font-weight: 600;
            margin-bottom: 10px;
            color: #495057;
        }

        .response-content {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .status-indicator {
            margin-top: 10px;
            padding: 8px 12px;
            border-radius: 5px;
            font-weight: 600;
            display: inline-block;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .auth-status {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .token-display {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            background: #e9ecef;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            word-break: break-all;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .container {
                margin: 10px;
            }
            
            .content {
                padding: 20px;
            }
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .json-viewer {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
        }

        .json-key { color: #63b3ed; }
        .json-string { color: #68d391; }
        .json-number { color: #f6ad55; }
        .json-boolean { color: #fc8181; }
        .json-null { color: #a0aec0; }

        /* Footer Styles */
        .footer { 
            margin-top: 50px; 
            padding: 20px 0; 
            border-top: 1px solid #ddd; 
            text-align: center; 
            color: #666; 
            background: #f8f9fa;
        }
        .footer a { 
            color: #007bff; 
            text-decoration: none; 
            cursor: pointer; 
        }
        .footer a:hover { 
            text-decoration: underline; 
        }
        
        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 90%;
            text-align: center;
            position: relative;
        }

        .close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #aaa;
            line-height: 1;
        }

        .close:hover {
            color: #000;
        }
        
        .developer-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .developer-photo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid #007bff;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
            margin: 0 auto;
        }
        
        .developer-name {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin: 0;
        }
        
        .developer-title {
            font-size: 14px;
            color: #666;
            margin: 0;
            font-style: italic;
        }
        
        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 20px;
            text-decoration: none;
            color: #495057;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .social-link:hover {
            background: #007bff;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
        }
        
        .social-link.instagram:hover { background: #E4405F; }
        .social-link.linkedin:hover { background: #0077B5; }
        .social-link.github:hover { background: #333; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 E-Journal API Demo</h1>
            <p>Interactive demo untuk testing semua endpoint REST API E-Journal</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('auth')">🔐 Authentication</button>
            <button class="nav-tab" onclick="showTab('jurnal')">📚 Jurnal API</button>
            <button class="nav-tab" onclick="showTab('admin')">👨‍💼 Admin Panel</button>
            <button class="nav-tab" onclick="showTab('docs')">📖 Documentation</button>
        </div>

        <div class="content">
            <!-- Authentication Tab -->
            <div id="auth" class="tab-content active">
                <div class="auth-status" id="authStatus">
                    <strong>Status:</strong> <span id="loginStatus">Belum login</span>
                    <div id="tokenDisplay" style="display: none;">
                        <strong>Token:</strong>
                        <div class="token-display" id="currentToken"></div>
                        <button onclick="copyToken()" class="btn-secondary" style="margin-top: 10px;">📋 Copy Token</button>
                    </div>
                    
                    <!-- Manual Token Input -->
                    <div class="endpoint-section" style="margin-top: 20px;">
                        <div class="endpoint-header">
                            <div class="endpoint-title">Manual Token Input</div>
                            <span class="badge badge-info">Simplified localStorage system</span>
                        </div>
                        <div class="endpoint-body">
                            <p><strong>Info:</strong> Sistem ini menggunakan localStorage untuk menyimpan token. Token hanya perlu format yang valid (minimal 40 karakter). Server akan menerima token apa pun yang terlihat valid.</p>
                            <p>Jika Anda memiliki token dari login sebelumnya, masukkan di sini:</p>
                            <input type="text" id="manualToken" placeholder="Paste token di sini..." style="width: 100%; margin-bottom: 10px;">
                            <button onclick="setManualToken()" class="btn-secondary">🔑 Set Token</button>
                            <button onclick="clearToken()" class="btn-danger" style="margin-left: 10px;">🗑️ Clear Token</button>
                            <button onclick="generateDemoToken()" class="btn btn-success" style="margin-left: 10px;">🎯 Generate Demo Token</button>
                        </div>
                    </div>
                </div>

                <div class="grid">
                    <!-- Login Admin -->
                    <div class="endpoint-section">
                        <div class="endpoint-header">
                            <div class="endpoint-title">Login Admin</div>
                            <span class="endpoint-method method-post">POST</span>
                            <code>/api/admin/login</code>
                        </div>
                        <div class="endpoint-body">
                            <div class="form-group">
                                <label class="form-label">Email/Username:</label>
                                <input type="text" class="form-input" id="loginEmail" value="admin@example.com" placeholder="admin@example.com">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Password:</label>
                                <input type="password" class="form-input" id="loginPassword" value="password" placeholder="password">
                            </div>
                            <button class="btn btn-primary" onclick="adminLogin()">Login</button>
                            <div id="loginResponse" class="response-container" style="display: none;">
                                <div class="response-header">Response:</div>
                                <div class="response-content" id="loginResponseContent"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Register Admin -->
                    <div class="endpoint-section">
                        <div class="endpoint-header">
                            <div class="endpoint-title">Register Admin</div>
                            <span class="endpoint-method method-post">POST</span>
                            <code>/api/admin/register</code>
                        </div>
                        <div class="endpoint-body">
                            <div class="form-group">
                                <label class="form-label">Username:</label>
                                <input type="text" class="form-input" id="regUsername" placeholder="newadmin">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email:</label>
                                <input type="email" class="form-input" id="regEmail" placeholder="newadmin@example.com">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Password:</label>
                                <input type="password" class="form-input" id="regPassword" placeholder="password123">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Confirm Password:</label>
                                <input type="password" class="form-input" id="regPasswordConfirm" placeholder="password123">
                            </div>
                            <button class="btn btn-success" onclick="adminRegister()">Register</button>
                            <div id="registerResponse" class="response-container" style="display: none;">
                                <div class="response-header">Response:</div>
                                <div class="response-content" id="registerResponseContent"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin Profile & Actions -->
                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">Admin Actions (Requires Token)</div>
                    </div>
                    <div class="endpoint-body">
                        <button class="btn btn-primary" onclick="getProfile()">Get Profile</button>
                        <button class="btn btn-primary" onclick="showChangePassword()">Change Password</button>
                        <button class="btn btn-danger" onclick="adminLogout()">Logout</button>
                        
                        <div id="changePasswordForm" style="display: none; margin-top: 20px;">
                            <div class="form-group">
                                <label class="form-label">Current Password:</label>
                                <input type="password" class="form-input" id="currentPassword">
                            </div>
                            <div class="form-group">
                                <label class="form-label">New Password:</label>
                                <input type="password" class="form-input" id="newPassword">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Confirm New Password:</label>
                                <input type="password" class="form-input" id="newPasswordConfirm">
                            </div>
                            <button class="btn btn-success" onclick="changePassword()">Change Password</button>
                        </div>

                        <div id="adminResponse" class="response-container" style="display: none;">
                            <div class="response-header">Response:</div>
                            <div class="response-content" id="adminResponseContent"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Jurnal API Tab -->
            <div id="jurnal" class="tab-content">
                <!-- Get All Jurnal -->
                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">Get All Jurnal (Public)</div>
                        <span class="endpoint-method method-get">GET</span>
                        <code>/api/jurnal</code>
                    </div>
                    <div class="endpoint-body">
                        <div class="grid">
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Search Keyword:</label>
                                    <input type="text" class="form-input" id="searchKeyword" placeholder="machine learning">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Subject Filter:</label>
                                    <select class="form-input" id="subjectFilter">
                                        <option value="">-- All Subjects --</option>
                                        <option value="Teknologi Informasi">Teknologi Informasi</option>
                                        <option value="Ekonomi">Ekonomi</option>
                                        <option value="Lingkungan">Lingkungan</option>
                                        <option value="Teknik Industri">Teknik Industri</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Akreditasi Filter:</label>
                                    <select class="form-input" id="akreditasiFilter">
                                        <option value="">-- All Akreditasi --</option>
                                        <option value="Sinta 1">Sinta 1</option>
                                        <option value="Sinta 2">Sinta 2</option>
                                        <option value="Sinta 3">Sinta 3</option>
                                        <option value="Scopus">Scopus</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Sort By:</label>
                                    <select class="form-input" id="sortBy">
                                        <option value="">-- Default --</option>
                                        <option value="views">Views</option>
                                        <option value="created_at">Date Created</option>
                                        <option value="judul">Title</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Sort Order:</label>
                                    <select class="form-input" id="sortOrder">
                                        <option value="desc">Descending (Z-A, 9-1)</option>
                                        <option value="asc">Ascending (A-Z, 1-9)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="getAllJurnal()">Get Jurnal</button>
                        <button class="btn btn-success" onclick="getSubjects()">Get Subjects</button>
                        <button class="btn btn-success" onclick="getAkreditasi()">Get Akreditasi</button>
                        
                        <div id="jurnalListResponse" class="response-container" style="display: none;">
                            <div class="response-header">Response:</div>
                            <div class="response-content" id="jurnalListContent"></div>
                        </div>
                    </div>
                </div>

                <!-- Jurnal dengan Views Terbanyak -->
                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">Jurnal dengan Views Terbanyak</div>
                        <span class="endpoint-method method-get">GET</span>
                        <code>/api/jurnal?sort_by=views&order=desc</code>
                    </div>
                    <div class="endpoint-body">
                        <div class="grid">
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Limit (Top N):</label>
                                    <select class="form-input" id="topViewsLimit">
                                        <option value="5">Top 5</option>
                                        <option value="10" selected>Top 10</option>
                                        <option value="20">Top 20</option>
                                        <option value="">All</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Subject Filter:</label>
                                    <select class="form-input" id="topViewsSubject">
                                        <option value="">-- All Subjects --</option>
                                        <option value="Teknologi Informasi">Teknologi Informasi</option>
                                        <option value="Ekonomi">Ekonomi</option>
                                        <option value="Lingkungan">Lingkungan</option>
                                        <option value="Teknik Industri">Teknik Industri</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-success" onclick="getTopViewsJurnal()">📊 Get Top Views Jurnal</button>
                        
                        <div id="topViewsResponse" class="response-container" style="display: none;">
                            <div class="response-header">Response:</div>
                            <div class="response-content" id="topViewsContent"></div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Sort & Pagination -->
                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">Advanced Sort & Pagination</div>
                        <span class="endpoint-method method-get">GET</span>
                        <code>/api/jurnal?sort_by=&order=&per_page=&page=</code>
                    </div>
                    <div class="endpoint-body">
                        <div class="grid">
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Sort By:</label>
                                    <select class="form-input" id="advancedSortBy">
                                        <option value="">-- Default --</option>
                                        <option value="views">Views</option>
                                        <option value="created_at">Date Created</option>
                                        <option value="updated_at">Date Updated</option>
                                        <option value="judul">Title</option>
                                        <option value="penulis">Author</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Sort Order:</label>
                                    <select class="form-input" id="sortOrder">
                                        <option value="desc">Descending (Z-A, 9-1)</option>
                                        <option value="asc">Ascending (A-Z, 1-9)</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Per Page:</label>
                                    <select class="form-input" id="perPage">
                                        <option value="5">5 per page</option>
                                        <option value="10" selected>10 per page</option>
                                        <option value="15">15 per page</option>
                                        <option value="20">20 per page</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Page:</label>
                                    <input type="number" class="form-input" id="pageNumber" value="1" min="1" placeholder="1">
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-info" onclick="getAdvancedJurnal()">🔍 Advanced Search</button>
                        
                        <div id="advancedResponse" class="response-container" style="display: none;">
                            <div class="response-header">Response:</div>
                            <div class="response-content" id="advancedContent"></div>
                        </div>
                    </div>
                </div>

                <!-- Get Jurnal by ID -->
                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">Get Jurnal by ID (Increment Views)</div>
                        <span class="endpoint-method method-get">GET</span>
                        <code>/api/jurnal/{id}</code>
                    </div>
                    <div class="endpoint-body">
                        <div class="form-group">
                            <label class="form-label">Jurnal ID:</label>
                            <input type="number" class="form-input" id="jurnalId" value="1" placeholder="1">
                        </div>
                        <button class="btn btn-primary" onclick="getJurnalById()">Get Jurnal Detail</button>
                        
                        <div id="jurnalDetailResponse" class="response-container" style="display: none;">
                            <div class="response-header">Response:</div>
                            <div class="response-content" id="jurnalDetailContent"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Panel Tab -->
            <div id="admin" class="tab-content">
                <div style="background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 5px; padding: 15px; margin-bottom: 20px;">
                    <strong>💡 Simplified System:</strong> 
                    <p>Sistem ini telah disederhanakan menggunakan localStorage untuk token. Anda dapat:</p>
                    <ul>
                        <li>🔑 Login normal untuk mendapatkan token</li>
                        <li>🎯 Generate demo token langsung (tombol di tab Authentication)</li>
                        <li>📋 Input token manual jika diperlukan</li>
                    </ul>
                    <p>Semua fitur admin akan bekerja dengan token apa pun yang valid!</p>
                </div>

                <!-- Create Jurnal -->
                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">Create Jurnal (Admin Only)</div>
                        <span class="endpoint-method method-post">POST</span>
                        <code>/api/admin/jurnal</code>
                    </div>
                    <div class="endpoint-body">
                        <div class="grid">
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Judul:</label>
                                    <input type="text" class="form-input" id="createJudul" placeholder="Judul Jurnal Baru">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Subject:</label>
                                    <input type="text" class="form-input" id="createSubject" placeholder="Teknologi Informasi">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Akreditasi:</label>
                                    <select class="form-input" id="createAkreditasi">
                                        <option value="Sinta 1">Sinta 1</option>
                                        <option value="Sinta 2">Sinta 2</option>
                                        <option value="Sinta 3">Sinta 3</option>
                                        <option value="Scopus">Scopus</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Penerbit:</label>
                                    <input type="text" class="form-input" id="createPenerbit" placeholder="Nama Penerbit">
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Link Akreditasi:</label>
                                    <input type="url" class="form-input" id="createLinkAkreditasi" placeholder="https://sinta.ristekbrin.go.id">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Link Penerbit:</label>
                                    <input type="url" class="form-input" id="createLinkPenerbit" placeholder="https://publisher.com">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Foto (optional):</label>
                                    <input type="file" class="form-input" id="createFoto" accept="image/*">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Deskripsi:</label>
                            <textarea class="form-input form-textarea" id="createDeskripsi" placeholder="Deskripsi lengkap jurnal..."></textarea>
                        </div>
                        <button class="btn btn-success" onclick="createJurnal()">Create Jurnal</button>
                        
                        <div id="createResponse" class="response-container" style="display: none;">
                            <div class="response-header">Response:</div>
                            <div class="response-content" id="createResponseContent"></div>
                        </div>
                    </div>
                </div>

                <!-- Update Jurnal -->
                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">Update Jurnal (Admin Only)</div>
                        <span class="endpoint-method method-put">PUT</span>
                        <code>/api/admin/jurnal/{id}</code>
                    </div>
                    <div class="endpoint-body">
                        <div class="form-group">
                            <label class="form-label">Jurnal ID to Update:</label>
                            <input type="number" class="form-input" id="updateId" value="1" placeholder="1">
                        </div>
                        <div class="grid">
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Judul (optional):</label>
                                    <input type="text" class="form-input" id="updateJudul" placeholder="Updated Title">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Subject (optional):</label>
                                    <input type="text" class="form-input" id="updateSubject" placeholder="Updated Subject">
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label class="form-label">Akreditasi (optional):</label>
                                    <select class="form-input" id="updateAkreditasi">
                                        <option value="">-- No Change --</option>
                                        <option value="Sinta 1">Sinta 1</option>
                                        <option value="Sinta 2">Sinta 2</option>
                                        <option value="Sinta 3">Sinta 3</option>
                                        <option value="Scopus">Scopus</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Foto (optional):</label>
                                    <input type="file" class="form-input" id="updateFoto" accept="image/*">
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="updateJurnal()">Update Jurnal</button>
                        
                        <div id="updateResponse" class="response-container" style="display: none;">
                            <div class="response-header">Response:</div>
                            <div class="response-content" id="updateResponseContent"></div>
                        </div>
                    </div>
                </div>

                <!-- Delete Jurnal -->
                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">Delete Jurnal (Admin Only)</div>
                        <span class="endpoint-method method-delete">DELETE</span>
                        <code>/api/admin/jurnal/{id}</code>
                    </div>
                    <div class="endpoint-body">
                        <div class="form-group">
                            <label class="form-label">Jurnal ID to Delete:</label>
                            <input type="number" class="form-input" id="deleteId" placeholder="6">
                        </div>
                        <button class="btn btn-danger" onclick="deleteJurnal()">Delete Jurnal</button>
                        
                        <div id="deleteResponse" class="response-container" style="display: none;">
                            <div class="response-header">Response:</div>
                            <div class="response-content" id="deleteResponseContent"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Documentation Tab -->
            <div id="docs" class="tab-content">
                <!-- API Status Check -->
                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">API Status & Info</div>
                        <span class="endpoint-method method-get">GET</span>
                        <code>/api/status</code>
                    </div>
                    <div class="endpoint-body">
                        <p>Check API status, version, and available endpoints:</p>
                        <button class="btn btn-info" onclick="getApiStatus()">🔍 Check API Status</button>
                        
                        <div id="statusResponse" class="response-container" style="display: none;">
                            <div class="response-header">Response:</div>
                            <div class="response-content" id="statusContent"></div>
                        </div>
                    </div>
                </div>

                <!-- Sample Data Management -->
                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">Demo Data Management</div>
                        <span class="endpoint-method method-post">POST</span>
                        <code>/api/sample/generate</code>
                    </div>
                    <div class="endpoint-body">
                        <p>Generate sample journal data with different view counts for testing demo features:</p>
                        <div class="grid">
                            <div>
                                <button class="btn btn-success" onclick="generateSampleData()">📊 Generate Sample Data</button>
                                <button class="btn btn-info" onclick="getSampleStats()">📈 Get Data Statistics</button>
                            </div>
                        </div>
                        
                        <div id="sampleResponse" class="response-container" style="display: none;">
                            <div class="response-header">Response:</div>
                            <div class="response-content" id="sampleContent"></div>
                        </div>
                    </div>
                </div>

                <div class="endpoint-section">
                    <div class="endpoint-header">
                        <div class="endpoint-title">📖 API Documentation</div>
                    </div>
                    <div class="endpoint-body">
                        <div style="text-align: center; margin: 20px 0;">
                            <a href="api-documentation.html" target="_blank" style="display: inline-block; background: #667eea; color: white; padding: 15px 30px; border-radius: 8px; text-decoration: none; font-weight: 600; margin: 10px; transition: background 0.3s ease;">
                                📚 Buka Dokumentasi Lengkap
                            </a>
                        </div>
                        
                        <h3>🌐 Base URL</h3>
                        <div class="api-url-container">
                            <p><strong>Production:</strong> <code>https://itlab.unila.ac.id/api</code></p>
                            <p><strong>Development:</strong> <code>http://localhost/backend-1/e-journal/public/api</code></p>
                        </div>

                        <h3>🔐 Authentication</h3>
                        <p>API menggunakan Bearer Token authentication. Setelah login berhasil, sertakan token dalam header setiap request:</p>
                        <div class="json-viewer">
Authorization: Bearer {your-token-here}
Content-Type: application/json
Accept: application/json
                        </div>

                        <h3>📋 Response Format</h3>
                        <p>Semua response API menggunakan format JSON standar:</p>
                        <div class="json-viewer">
{
  "success": true,
  "message": "Pesan sukses atau error",
  "data": {
    // Data response (jika ada)
  },
  "errors": {
    // Validation errors (jika ada)
  }
}
                        </div>

                        <h3>🌍 Quick Reference - Public Endpoints</h3>
                        <div class="endpoint-list">
                            <div class="endpoint-item">
                                <span class="method get">GET</span>
                                <code>https://itlab.unila.ac.id/api/jurnal</code>
                                <p>List jurnal dengan pagination, search, dan filter</p>
                            </div>
                            <div class="endpoint-item">
                                <span class="method get">GET</span>
                                <code>https://itlab.unila.ac.id/api/jurnal/{id}</code>
                                <p>Detail jurnal berdasarkan ID (otomatis increment views)</p>
                            </div>
                            <div class="endpoint-item">
                                <span class="method post">POST</span>
                                <code>https://itlab.unila.ac.id/api/admin/login</code>
                                <p>Login admin dan mendapatkan token</p>
                            </div>
                            <div class="endpoint-item">
                                <span class="method post">POST</span>
                                <code>https://itlab.unila.ac.id/api/admin/register</code>
                                <p>Registrasi admin baru</p>
                            </div>
                        </div>

                        <h3>🔒 Quick Reference - Admin Endpoints</h3>
                        <div class="endpoint-list">
                            <div class="endpoint-item">
                                <span class="method get">GET</span>
                                <code>https://itlab.unila.ac.id/api/admin/profile</code>
                                <p>Profile admin yang sedang login</p>
                            </div>
                            <div class="endpoint-item">
                                <span class="method post">POST</span>
                                <code>https://itlab.unila.ac.id/api/admin/jurnal</code>
                                <p>Buat jurnal baru</p>
                            </div>
                            <div class="endpoint-item">
                                <span class="method put">PUT</span>
                                <code>https://itlab.unila.ac.id/api/admin/jurnal/{id}</code>
                                <p>Update jurnal berdasarkan ID</p>
                            </div>
                            <div class="endpoint-item">
                                <span class="method delete">DELETE</span>
                                <code>https://itlab.unila.ac.id/api/admin/jurnal/{id}</code>
                                <p>Hapus jurnal berdasarkan ID (soft delete)</p>
                            </div>
                        </div>

                        <div class="note" style="background: #d1ecf1; border: 1px solid #bee5eb; border-left: 4px solid #17a2b8; padding: 15px; border-radius: 6px; margin: 20px 0;">
                            <strong>📚 Dokumentasi Lengkap:</strong> Untuk informasi detail, parameter, example usage, dan features lengkap, 
                            silahkan buka <a href="api-documentation.html" target="_blank" style="color: #0c5460; font-weight: bold;">Dokumentasi API Lengkap</a>.
                        </div>

                        <h3>👤 Default Admin Account (Development)</h3>
                        <div class="admin-info">
                            <p><strong>Email:</strong> <code>admin@itlab.unila.ac.id</code></p>
                            <p><strong>Password:</strong> <code>password123</code></p>
                            <p><em>*Untuk testing di environment development</em></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>&copy; 2025 Universitas Lampung (UNILA). All rights reserved.</p>
        <p><a href="#" onclick="openDeveloperModal()">Hubungi Developer</a></p>
    </div>

    <!-- Developer Modal -->
    <div id="developerModal" class="modal-overlay">
        <div class="modal-content">
            <span class="close" onclick="closeDeveloperModal()">&times;</span>
            <div class="developer-card">
                <div class="developer-photo">👨‍💻</div>
                <h3 class="developer-name">Imam Ariadi</h3>
                <p class="developer-title">Full Stack Developer | Universitas Lampung</p>
                <p style="color: #666; font-size: 14px; margin: 15px 0;">
                    Spesialis dalam pengembangan Laravel, React, dan teknologi web modern. 
                    Berpengalaman dalam membangun aplikasi web yang efisien dan user-friendly.
                </p>
                <div class="social-links">
                    <a href="https://instagram.com/rizkipratama.dev" target="_blank" class="social-link">
                        📷 Instagram
                    </a>
                    <a href="https://linkedin.com/in/muhammad-rizki-pratama" target="_blank" class="social-link">
                        💼 LinkedIn
                    </a>
                    <a href="https://github.com/ImamAriadi2022" target="_blank" class="social-link">
                        💻 GitHub
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost/backend-1/e-journal/public/api';
        const FALLBACK_API_BASE = 'http://localhost/backend-1/e-journal/public/api';
        let currentToken = localStorage.getItem('authToken');

        // Tab management
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Update auth status display
        function updateAuthStatus() {
            const statusEl = document.getElementById('loginStatus');
            const tokenEl = document.getElementById('tokenDisplay');
            const currentTokenEl = document.getElementById('currentToken');

            if (currentToken) {
                statusEl.textContent = 'Logged in ✅';
                statusEl.className = 'status-success';
                tokenEl.style.display = 'block';
                currentTokenEl.textContent = currentToken;
            } else {
                statusEl.textContent = 'Belum login ❌';
                statusEl.className = 'status-error';
                tokenEl.style.display = 'none';
            }
        }

        // Copy token to clipboard
        function copyToken() {
            if (currentToken) {
                navigator.clipboard.writeText(currentToken).then(() => {
                    alert('Token berhasil dicopy ke clipboard!');
                }).catch(err => {
                    console.error('Gagal copy token:', err);
                    alert('Gagal copy token. Silakan copy manual.');
                });
            }
        }

        // Set manual token
        function setManualToken() {
            const manualToken = document.getElementById('manualToken').value.trim();
            if (manualToken) {
                currentToken = manualToken;
                localStorage.setItem('authToken', currentToken);
                updateAuthStatus();
                document.getElementById('manualToken').value = '';
                alert('Token berhasil diset!');
            } else {
                alert('Silakan masukkan token terlebih dahulu.');
            }
        }

        // Generate demo token for testing
        function generateDemoToken() {
            // Generate random 80-character token
            const chars = 'abcdef0123456789';
            let token = '';
            for (let i = 0; i < 80; i++) {
                token += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            currentToken = token;
            localStorage.setItem('authToken', currentToken);
            updateAuthStatus();
            alert('Demo token generated and set! You can now use all admin features.');
        }

        // Clear token
        function clearToken() {
            currentToken = null;
            localStorage.removeItem('authToken');
            updateAuthStatus();
            alert('Token berhasil dihapus!');
        }

        // API request helper with automatic fallback
        async function apiRequest(endpoint, options = {}) {
            const url = `${API_BASE}${endpoint}`;
            const config = {
                headers: {
                    'Accept': 'application/json',
                    ...options.headers
                },
                ...options
            };

            // Don't set Content-Type for FormData (let browser handle it)
            if (!(options.body instanceof FormData) && !options.isFormData) {
                config.headers['Content-Type'] = 'application/json';
            }

            if (currentToken && !options.noAuth) {
                config.headers['Authorization'] = `Bearer ${currentToken}`;
            }

            try {
                const response = await fetch(url, config);
                
                // Get response text first to debug
                const responseText = await response.text();
                console.log('Raw response:', responseText);
                
                // Try to parse as JSON
                let data;
                try {
                    data = JSON.parse(responseText);
                } catch (parseError) {
                    console.error('JSON Parse Error:', parseError);
                    console.error('Response text:', responseText);
                    
                    // Return error with raw response for debugging
                    return {
                        status: response.status,
                        success: false,
                        data: { 
                            message: 'JSON Parse Error: ' + parseError.message,
                            raw_response: responseText.substring(0, 1000) + (responseText.length > 1000 ? '...' : '')
                        }
                    };
                }
                
                // If Laravel API fails with 500 error, try fallback
                if (response.status === 500 || !response.ok) {
                    console.log('Laravel API failed, trying fallback...');
                    return await tryFallbackAPI(endpoint, options);
                }
                
                return {
                    status: response.status,
                    success: response.ok,
                    data: data
                };
            } catch (error) {
                console.error('Network Error:', error);
                console.log('Trying fallback API...');
                return await tryFallbackAPI(endpoint, options);
            }
        }

        // Fallback API helper
        async function tryFallbackAPI(endpoint, options = {}) {
            try {
                // Map endpoint to fallback URL with query string
                const fallbackUrl = `api-fallback.php?endpoint=${encodeURIComponent(endpoint)}`;
                
                const config = {
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        ...options.headers
                    },
                    ...options
                };

                if (currentToken && !options.noAuth) {
                    config.headers['Authorization'] = `Bearer ${currentToken}`;
                }

                const response = await fetch(fallbackUrl, config);
                const data = await response.json();
                
                return {
                    status: response.status,
                    success: response.ok,
                    data: data
                };
            } catch (fallbackError) {
                console.error('Fallback API also failed:', fallbackError);
                return {
                    status: 0,
                    success: false,
                    data: { message: 'Both main and fallback APIs failed: ' + fallbackError.message }
                };
            }
        }

        // Display response
        function displayResponse(containerId, contentId, response) {
            const container = document.getElementById(containerId);
            const content = document.getElementById(contentId);
            
            container.style.display = 'block';
            content.textContent = JSON.stringify(response.data, null, 2);
            
            // Add status indicator
            let statusEl = container.querySelector('.status-indicator');
            if (statusEl) statusEl.remove();
            
            statusEl = document.createElement('div');
            statusEl.className = `status-indicator ${response.success ? 'status-success' : 'status-error'}`;
            statusEl.textContent = `Status: ${response.status} - ${response.success ? 'Success' : 'Error'}`;
            container.appendChild(statusEl);
        }

        // Authentication functions
        async function adminLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            // Try Laravel API first
            let response = await apiRequest('/admin/login', {
                method: 'POST',
                body: JSON.stringify({
                    login: email,
                    password: password
                }),
                noAuth: true
            });

            // If Laravel API fails, try direct PHP fallback
            if (!response.success || response.status === 0) {
                try {
                    const fallbackResponse = await fetch('http://localhost/backend-1/e-journal/public/api-login.php', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify({
                            email: email,
                            password: password
                        })
                    });
                    
                    const fallbackData = await fallbackResponse.json();
                    response = {
                        status: fallbackResponse.status,
                        success: fallbackResponse.ok,
                        data: fallbackData
                    };
                } catch (fallbackError) {
                    console.error('Fallback API also failed:', fallbackError);
                }
            }

            if (response.success && response.data.data && response.data.data.token) {
                currentToken = response.data.data.token;
                localStorage.setItem('authToken', currentToken);
                updateAuthStatus();
            }

            displayResponse('loginResponse', 'loginResponseContent', response);
        }

        async function adminRegister() {
            const username = document.getElementById('regUsername').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const passwordConfirm = document.getElementById('regPasswordConfirm').value;

            // Try Laravel API first
            let response = await apiRequest('/admin/register', {
                method: 'POST',
                body: JSON.stringify({
                    username: username,
                    email: email,
                    password: password,
                    password_confirmation: passwordConfirm
                }),
                noAuth: true
            });

            // If Laravel API fails, try direct PHP fallback
            if (!response.success || response.status === 0) {
                try {
                    const fallbackResponse = await fetch('http://localhost/backend-1/e-journal/public/api-register.php', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify({
                            username: username,
                            email: email,
                            password: password,
                            password_confirmation: passwordConfirm
                        })
                    });
                    
                    const fallbackData = await fallbackResponse.json();
                    response = {
                        status: fallbackResponse.status,
                        success: fallbackResponse.ok,
                        data: fallbackData
                    };
                } catch (fallbackError) {
                    console.error('Fallback API also failed:', fallbackError);
                }
            }

            if (response.success && response.data.data && response.data.data.token) {
                currentToken = response.data.data.token;
                localStorage.setItem('authToken', currentToken);
                updateAuthStatus();
            }

            displayResponse('registerResponse', 'registerResponseContent', response);
        }

        async function getProfile() {
            const response = await apiRequest('/admin/profile');
            displayResponse('adminResponse', 'adminResponseContent', response);
        }

        async function testToken() {
            const response = await apiRequest('/test-token');
            displayResponse('adminResponse', 'adminResponseContent', response);
        }

        function showChangePassword() {
            const form = document.getElementById('changePasswordForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        async function changePassword() {
            const currentPass = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const newPassConfirm = document.getElementById('newPasswordConfirm').value;

            const response = await apiRequest('/admin/change-password', {
                method: 'POST',
                body: JSON.stringify({
                    current_password: currentPass,
                    new_password: newPass,
                    new_password_confirmation: newPassConfirm
                })
            });

            displayResponse('adminResponse', 'adminResponseContent', response);
        }

        async function adminLogout() {
            const response = await apiRequest('/admin/logout', {
                method: 'POST'
            });

            if (response.success) {
                currentToken = null;
                localStorage.removeItem('authToken');
                updateAuthStatus();
            }

            displayResponse('adminResponse', 'adminResponseContent', response);
        }

        // Jurnal functions
        async function getAllJurnal() {
            const search = document.getElementById('searchKeyword').value;
            const subject = document.getElementById('subjectFilter').value;
            const akreditasi = document.getElementById('akreditasiFilter').value;
            const sortBy = document.getElementById('sortBy').value;
            const sortOrder = document.getElementById('sortOrder').value;

            let queryParams = new URLSearchParams();
            if (search) queryParams.append('search', search);
            if (subject) queryParams.append('subject', subject);
            if (akreditasi) queryParams.append('akreditasi', akreditasi);
            if (sortBy) queryParams.append('sort_by', sortBy);
            if (sortOrder) queryParams.append('order', sortOrder);

            const endpoint = `/jurnal${queryParams.toString() ? '?' + queryParams.toString() : ''}`;
            const response = await apiRequest(endpoint, { noAuth: true });
            displayResponse('jurnalListResponse', 'jurnalListContent', response);
        }

        async function getTopViewsJurnal() {
            const limit = document.getElementById('topViewsLimit').value;
            const subject = document.getElementById('topViewsSubject').value;

            let queryParams = new URLSearchParams();
            queryParams.append('sort_by', 'views');
            queryParams.append('order', 'desc');
            if (limit) queryParams.append('per_page', limit);
            if (subject) queryParams.append('subject', subject);

            const endpoint = `/jurnal?${queryParams.toString()}`;
            const response = await apiRequest(endpoint, { noAuth: true });
            displayResponse('topViewsResponse', 'topViewsContent', response);
        }

        async function getAdvancedJurnal() {
            const sortBy = document.getElementById('advancedSortBy').value;
            const sortOrder = document.getElementById('sortOrder').value;
            const perPage = document.getElementById('perPage').value;
            const page = document.getElementById('pageNumber').value;

            let queryParams = new URLSearchParams();
            if (sortBy) queryParams.append('sort_by', sortBy);
            if (sortOrder) queryParams.append('order', sortOrder);
            if (perPage) queryParams.append('per_page', perPage);
            if (page) queryParams.append('page', page);

            const endpoint = `/jurnal${queryParams.toString() ? '?' + queryParams.toString() : ''}`;
            const response = await apiRequest(endpoint, { noAuth: true });
            displayResponse('advancedResponse', 'advancedContent', response);
        }

        async function getJurnalById() {
            const id = document.getElementById('jurnalId').value;
            const response = await apiRequest(`/jurnal/${id}`, { noAuth: true });
            displayResponse('jurnalDetailResponse', 'jurnalDetailContent', response);
        }

        async function getSubjects() {
            const response = await apiRequest('/jurnal/subjects', { noAuth: true });
            displayResponse('jurnalListResponse', 'jurnalListContent', response);
        }

        async function getAkreditasi() {
            const response = await apiRequest('/jurnal/akreditasi', { noAuth: true });
            displayResponse('jurnalListResponse', 'jurnalListContent', response);
        }

        async function getApiStatus() {
            const response = await apiRequest('/status', { noAuth: true });
            displayResponse('statusResponse', 'statusContent', response);
        }

        async function generateSampleData() {
            const response = await apiRequest('/sample/generate', {
                method: 'POST',
                noAuth: true
            });
            displayResponse('sampleResponse', 'sampleContent', response);
        }

        async function getSampleStats() {
            const response = await apiRequest('/sample/stats', { noAuth: true });
            displayResponse('sampleResponse', 'sampleContent', response);
        }

        // Admin jurnal functions
        async function createJurnal() {
            const formData = new FormData();
            formData.append('judul', document.getElementById('createJudul').value);
            formData.append('subject', document.getElementById('createSubject').value);
            formData.append('akreditasi', document.getElementById('createAkreditasi').value);
            formData.append('penerbit', document.getElementById('createPenerbit').value);
            formData.append('link_akreditasi', document.getElementById('createLinkAkreditasi').value);
            formData.append('link_penerbit', document.getElementById('createLinkPenerbit').value);
            formData.append('deskripsi', document.getElementById('createDeskripsi').value);
            
            const fotoFile = document.getElementById('createFoto').files[0];
            if (fotoFile) {
                formData.append('foto', fotoFile);
            }

            const response = await apiRequest('/admin/jurnal', {
                method: 'POST',
                body: formData
            });

            displayResponse('createResponse', 'createResponseContent', response);
        }

        async function updateJurnal() {
            const id = document.getElementById('updateId').value;
            const formData = new FormData();
            
            const judul = document.getElementById('updateJudul').value;
            const subject = document.getElementById('updateSubject').value;
            const akreditasi = document.getElementById('updateAkreditasi').value;
            
            if (judul) formData.append('judul', judul);
            if (subject) formData.append('subject', subject);
            if (akreditasi) formData.append('akreditasi', akreditasi);
            
            const fotoFile = document.getElementById('updateFoto').files[0];
            if (fotoFile) {
                formData.append('foto', fotoFile);
            }

            // Use POST with _method override for PUT
            formData.append('_method', 'PUT');

            const response = await apiRequest(`/admin/jurnal/${id}`, {
                method: 'POST',
                body: formData
            });

            displayResponse('updateResponse', 'updateResponseContent', response);
        }

        async function deleteJurnal() {
            const id = document.getElementById('deleteId').value;
            const response = await apiRequest(`/admin/jurnal/${id}`, {
                method: 'DELETE'
            });

            displayResponse('deleteResponse', 'deleteResponseContent', response);
        }

        // Modal Functions
        function openDeveloperModal() {
            document.getElementById('developerModal').style.display = 'block';
        }

        function closeDeveloperModal() {
            document.getElementById('developerModal').style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('developerModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateAuthStatus();
        });
    </script>
</body>
</html>
